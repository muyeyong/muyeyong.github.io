---
title: åŠ¨ç”»æ•ˆæœ-é¥¿äº†ä¹ˆè´­ç‰©è½¦åŠ¨æ•ˆ
top: false
cover: false
toc: true
mathjax: true
date: 2020-12-09 16:17:46
password:
summary: é¥¿äº†ä¹ˆè´­ç‰©è½¦åŠ¨ç”»æ•ˆæœ
tags: animation
categories: åŠ¨ç”»æ•ˆæœ
---

# é¥¿äº†ä¹ˆè´­ç‰©è½¦åŠ¨ç”»å®ç°

NO PICTURE SAY JB

![](https://i.loli.net/2020/12/09/J5PikUvSjVFIMXO.gif)

[æºç è‡ªå–](https://github.com/muyeyong/eleAnimation)

[æ¼”ç¤ºç½‘å€ï¼Œå¯èƒ½æ˜¯å…¶ä»–ç»ƒä¹ ğŸ¤£](http://meyeyong.top/)

# å‰è¨€

å¥½ä¹…å¥½ä¹…æ²¡æœ‰æ›´æ–°åšå®¢äº†ï¼Œæœ€è¿‘å·¥ä½œç¡®å®æœ‰ç‚¹å¿™ï¼Œæœ€è¿‘çš„é¡¹ç›®æ€»ç»“ä¹Ÿä¸€ç›´æ‹–ç€æ²¡å†™ï¼Œä½†æ˜¯æ‡’æ‰æ˜¯åŸç½ªğŸ˜”ï¼Œå¹´è½»äººè¦åŠªåŠ›å•ŠğŸ˜¤

# å®ç°æŠ€æœ¯

1. ç§»åŠ¨ç«¯å¸ƒå±€ï¼š flex + rem + [flexible](https://github.com/amfe/lib-flexible)(ç§»åŠ¨ç«¯è²Œä¼¼ç”¨è§†å£å•ä½æ›´å¥½)  + SVG
2. å‰ç«¯æ¡†æ¶ï¼š VUE(ä½¿ç”¨äº†VUEè„šæ‰‹æ¶ï¼Œç‰ˆæœ¬3+)
3. ç¬¬ä¸‰æ–¹æ’ä»¶ï¼š[better-scroll](https://github.com/ustbhuangyi/better-scroll)

# å®ç°è¿‡ç¨‹

## åŸºæœ¬ç»“æ„çš„æ­å»º

å¼€å‘æ˜¯ä»¥å®½750pxçš„å±å¹•ä¸ºåŸºå‡†çš„ï¼Œä½¿ç”¨remæ˜¯ä¸ºäº†é€‚åº”ä¸åŒå°ºå¯¸çš„å±å¹•ã€‚flexibleçš„åŸç†æ˜¯å°†å±å¹•ç›´æ¥åˆ†ä¸º10ç­‰ä»½ï¼Œä»¥750çš„å±å¹•æ¥è¯´ï¼Œæ¯ä¸€ä»½æ˜¯75pxï¼Œç„¶åè®¾ç½®1rem === 75pxå°±å¯ä»¥äº†ã€‚

**å¼•å…¥flexible**

â€‹	![](https://i.loli.net/2020/12/09/ciI31BuHnWN8pPb.png)

**éœ€è¦æ³¨æ„çš„åœ°æ–¹**

![](https://i.loli.net/2020/12/09/mvkNo6GEHeIzygF.png)

å½“å±å¹•å®½åº¦å°äº750çš„æ—¶å€™å¼ºåˆ¶æŒ‡å®šæ ¹å…ƒç´ çš„ï¼š font-size: 75pxå»è¦†ç›–flexibleçš„å€¼ï¼Œrem(root rm)æ˜¯æ ¹æ®æ ¹å…ƒç´ çš„font-sizeå¤§å°ç¡®å®šçš„ã€‚

**å¥½ç”¨çš„vscodeæ’ä»¶**

`px to rem & rpx`ï¼šè‡ªåŠ¨å¸®ä½ æŠŠpxè½¬åŒ–ä¸ºremï¼Œå‰ææ˜¯éœ€è¦è®¾ç½®å¥½å‚è€ƒå€¼ï¼š1remå¯¹åº”å¤šå°‘px

![](https://i.loli.net/2020/12/09/z4LsuZagtQPkBdC.png)

**åœ¨é¡¹ç›®ä¸­ä½¿ç”¨SVG**

1. å®‰è£…æ’ä»¶ï¼š `npm install vue-svg-loader --save`
2. åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºvue.config.js

```
const path = require('path')

function resolve(dir) {
  return path.join(__dirname, './', dir)
}

module.exports = {
  chainWebpack: config => {
    config.plugin('define').tap(args => {
      const argv = process.argv
      const icourt = argv[argv.indexOf('--icourt-mode') + 1]

      args[0]['process.env'].MODE = `"${icourt}"`

      return args
    })
    // svg rule loader
    const svgRule = config.module.rule('svg') // æ‰¾åˆ°svg-loader
    svgRule.uses.clear() // æ¸…é™¤å·²æœ‰çš„loader, å¦‚æœä¸è¿™æ ·åšä¼šæ·»åŠ åœ¨æ­¤loaderä¹‹å
    svgRule.exclude.add(/node_modules/) // æ­£åˆ™åŒ¹é…æ’é™¤node_modulesç›®å½•
    svgRule // æ·»åŠ svgæ–°çš„loaderå¤„ç†
      .test(/\.svg$/)
      .use('svg-sprite-loader')
      .loader('svg-sprite-loader')
      .options({
        symbolId: 'icon-[name]',
      })

    // ä¿®æ”¹images loader æ·»åŠ svgå¤„ç†
    const imagesRule = config.module.rule('images')
    imagesRule.exclude.add(resolve('src/icons')) //å­˜å‚¨svgæ–‡ä»¶çš„æ ¹ç›®å½•
    config.module
      .rule('images')
      .test(/\.(png|jpe?g|gif|svg)(\?.*)?$/)
  },
  configureWebpack: {
    devServer: {
      open: true,
      // https: true,
      proxy: {
        '/user': {
          target: 'https://devadminschool.icourt.cc',
        },
        '/live': {
          target: 'https://devadminschool.icourt.cc',
        },
      },
    },
  },
}
```

3. æ–°å»º svgIcon.vueç»„ä»¶

```
<template>
  <svg :class="svgClass" aria-hidden="true">
    <use :xlink:href="iconName"/>
  </svg>
</template>

<script>
export default {
  name: "svgIcon",
  props: {
    iconClass: {
      type: String,
      required: true,
    },
    className: {
      type: String,
      default: '',
    },
  },
  computed: {
    iconName() {
      return `#icon-${this.iconClass}`
    },
    svgClass() {
      if (this.className) {
        return 'svg-icon ' + this.className
      } else {
        return 'svg-icon'
      }
    },
  }
}
</script>

<style scoped>
.svg-icon {
  width: 1em;
  height: 1em;
  fill: currentColor;
  overflow: hidden;
}
</style>

```

4. srcç›®å½•ä¸‹æ–°å»ºiconsæ–‡ä»¶å¤¹

è¿™ä¸ªæ–‡ä»¶å¤¹è·Ÿç¬¬äºŒæ­¥ä¸­çš„å¯¹åº”ï¼Œå¦‚ä¸‹å›¾

![](https://i.loli.net/2020/12/10/Q5oBgncz2Ddb6Rx.png)

5. iconsä¸­æ–°å»ºsvgæ–‡ä»¶å¤¹ï¼ˆå­˜å‚¨svgæ–‡ä»¶ï¼‰å’Œ index.js

   ```
   //index.js å†…å®¹
   import Vue from 'vue'
   import SvgIcon from '@/components/svgIcon' // svgç»„ä»¶
   
   // æ³¨å†Œåˆ°å…¨å±€
   Vue.component('svg-icon', SvgIcon)
   
   const requireAll = requireContext => requireContext.keys().map(requireContext)
   const req = require.context('./svg', false, /\.svg$/)
   requireAll(req)
   ```

6. åœ¨é¡¹ç›®ä¸­ä½¿ç”¨

   ![](https://i.loli.net/2020/12/10/BLVwiFv7qxTCgZJ.png)

## åŠŸèƒ½ç‚¹å®ç°

### æ»‘åŠ¨æ•ˆæœå®ç°

![](https://i.loli.net/2020/12/10/InrWoYpRbLhA2Fs.png)

æ»‘åŠ¨æ•ˆæœè¦è€ƒè™‘åˆ°å·¦ä¾§ä¸å³ä¾§çš„è”åŠ¨ï¼Œç‚¹å‡»å·¦ä¾§ï¼Œå³ä¾§éœ€è¦è°ƒåˆ°ç›¸åº”ä½ç½®ï¼Œæ»‘åŠ¨å³ä¾§ï¼Œå·¦ä¾§ä¹Ÿè¦ç›¸åº”å˜åŒ–ã€‚

å¯¹äºå³ä¾§ï¼šè·å–æ¯ä¸€ä¸ªå¤§ç±»ï¼ˆä¾‹å¦‚ï¼šæ¹˜èœã€å·èœï¼‰è·ç¦»é¡¶éƒ¨çš„è·ç¦»ï¼ˆoffsetTopï¼‰,ç„¶åç›‘å¬scrolläº‹ä»¶ï¼Œå°†äº‹ä»¶çš„yå€¼ä¸æ¯ä¸€é¡¹çš„offsetTopå¯¹æ¯”æ¥è”åŠ¨å·¦ä¾§

![](https://i.loli.net/2020/12/10/mlWV2MLGyYQz5p3.png)

å¯¹äºå·¦ä¾§ï¼š ç‚¹å‡»çš„å“ªä¸€ä¸ªç›´æ¥å°†å³ä¾§çš„domå…ƒç´ çš„å®ä¾‹ä¸Šæ»‘-offsetTop

**é‡åˆ°çš„å‘**

ä½¿ç”¨BScrollçš„æ—¶å€™ï¼Œå‘ç°æ»‘åŠ¨ä¸äº†ï¼š 

![](https://i.loli.net/2020/12/10/nWkuCpr9tq7ABTV.png)

### åŠ å…¥è´­ç‰©è½¦æ•ˆæœå®ç°

å½“ç‚¹å‡»ï¼‹çš„æ—¶å€™ï¼Œéœ€è¦å®ç°è´­ç‰©è½¦è·³å…¥çš„åŠ¨ç”»ï¼Œé€šè¿‡ [vue è¿‡æ¸¡å®ç°](https://cn.vuejs.org/v2/guide/transitions.html)

è¡¥å……ï¼š

1. getBoundingClientRect()æ˜¯DOMå…ƒç´ åˆ°æµè§ˆå™¨çš„å¯è§†è·ç¦»

![](https://i.loli.net/2020/12/10/BGOgPj6Z5YqDoks.png)

2. é€šè¿‡ç›‘å¬ transitionendã€animationendè¿›è¡Œç›¸åº”çŠ¶æ€å˜åŒ–

åŠªåŠ›å“¦ï¼Œå°‘å¹´ï¼ï¼ï¼

